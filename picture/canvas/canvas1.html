<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>在画布上定位图像</title>
		
	</head>
	<body>
		

		<img src="../../img/avatar-3.jpg" id="scream"   style="border:1px solid red;"/>
		<canvas id="myCanvas" style="border:1px solid red;"></canvas>	
	</body>
	<script>
		
		    /**
		     * 在画布上定位图像：
		     *     context.drawImage(img,x,y);
		     * 在画布上定位图像，并规定图像的宽度和高度：
		     *     context.drawImage(img,x,y,width,height);
		     * 剪切图像，并在画布上定位被剪切的部分：
				context.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);
				
				img:规定要使用的图像、画布或视频;
				  x:在画布上放置图像的 x 坐标位置;
				  y:在画布上放置图像的 y 坐标位置;
			  width:可选,要使用的图像的宽度;（伸展或缩小图像）
			 height:可选,要使用的图像的高度;（伸展或缩小图像）
			     sx:可选,开始剪切的 x 坐标位置;
                 sy:可选,开始剪切的 y 坐标位置;
             swidth:可选,被剪切图像的宽度;
			sheight:可选,被剪切图像的高度;
			
			原图的宽和高均大于显示区域时：
			 1.确定基准压缩图片;
			   a.计算原始图片的宽/高的比例和显示区域的宽/高的比例;
			   R1 = oragin_width / oragin_height;
			   R2 = area_with / area_height;
			   R1 = R2
		     */
			var c=document.getElementById("myCanvas");
			var ctx=c.getContext("2d");
			var img=document.getElementById("scream");
			img.onload = function()
			{
				/**
				 *  画布的宽(canvasw) = 伸展或缩小后的图像的宽(width)
				 *  画布的高(canvash) = 伸展或缩小后的图像的高(height)
				 *  裁剪的横坐标(sx) + 伸展或缩小后的图像的宽(width) <= (原图宽)ow
				 *  裁剪的纵坐标(sy) + 伸展或缩小后的图像的高(height) <= (原图高)oh
				 */
				var ow = 500,//原图宽
				    oh = 500,//原图高
				    width = 300,//伸展或缩小后的图像的宽
				    height = 300,//伸展或缩小后的图像的高
				    sx = 100,//开始剪切的 x 坐标位置
				    sy = 0,//开始剪切的 y 坐标位置
				    canvasw = width ,//画布的宽
				    canvash = height;//画布的高
				c.width = canvasw;//画布的宽
				c.height = canvash;//画布的高	
				if(sx > ow - width){
		   	  	 console.log("sx坐标过大");
		   	  	   sx = ow -width;
		   	    }
				if(sy > oh - height){
					console.log("sy坐标过大");
					sy = oh - height;
				}
				ctx.drawImage(img,sx,sy,ow,oh,0,0,width,height);
				
				
			}
		   function isCheck(sx,sy,width,height,ow,oh){
		   	//裁剪的横坐标(sx) + 伸展或缩小后的图像的宽(width) <= (原图宽)ow
		   	  
		   	  if(sx > ow - width){
		   	  	console.log("sx坐标过大");
		   	  	return false;
		   	  }
		   // 裁剪的纵坐标(sy) + 伸展或缩小后的图像的高(height) <= (原图高)oh
		   if(sy> oh - height){
		   	  console.log("sy坐标过大");
		   	  return false;
		   }
		   return true;
		   }
		</script>
</html>
